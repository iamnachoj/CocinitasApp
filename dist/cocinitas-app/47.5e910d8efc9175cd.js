"use strict";(self.webpackChunkcocinitas_app=self.webpackChunkcocinitas_app||[]).push([[47],{8047:(Q,m,c)=>{c.r(m),c.d(m,{RecipesModule:()=>Y});var s=c(1196),e=c(8256);let f=(()=>{class t{ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipes"]],decls:2,vars:0,consts:[[1,"col-md-12"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[s.lC]}),t})();var g=c(2401);let v=(()=>{class t{constructor(i){this.auth=i}resolve(i,n){this.auth.autoLogin(),this.auth.autoLogout(18e5)}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(g.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Z=c(5698),_=c(4004);let R=(()=>{class t{constructor(i,n){this.auth=i,this.router=n}canActivate(i,n){return this.auth.user.pipe((0,Z.q)(1),(0,_.U)(p=>!!p||(this.router.navigate(["/auth"]),!1)))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(g.e),e.LFG(s.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var a=c(9046),d=c(6895);const C=function(t){return[t]};let x=(()=>{class t{constructor(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe"]],inputs:{recipe:"recipe",index:"index"},decls:8,vars:7,consts:[[1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],[3,"src","alt"]],template:function(i,n){1&i&&(e.TgZ(0,"a",0)(1,"div",1)(2,"h4",2),e._uU(3),e.qZA(),e.TgZ(4,"p",3),e._uU(5),e.qZA()(),e.TgZ(6,"span",4),e._UZ(7,"img",5),e.qZA()()),2&i&&(e.Q6J("routerLink",e.VKq(5,C,n.index)),e.xp6(3),e.Oqu(n.recipe.name),e.xp6(2),e.Oqu(n.recipe.description),e.xp6(2),e.s9C("src",n.recipe.imagePath,e.LSH),e.MGl("alt","image of ",n.recipe.name,""))},dependencies:[s.yS],styles:["img[_ngcontent-%COMP%]{height:100px;width:130px}div[_ngcontent-%COMP%]{max-width:70%}@media screen and (max-width: 1200px){img[_ngcontent-%COMP%]{height:80px;width:80px}}@media screen and (max-width: 1000px){img[_ngcontent-%COMP%]{height:100px;width:100px}}"]}),t})();function w(t,r){if(1&t&&e._UZ(0,"app-recipe",7),2&t){const i=r.$implicit;e.Q6J("index",r.index)("recipe",i)}}const A=function(){return["new"]};let T=(()=>{class t{constructor(i){this.recipeService=i,this.recipes=[]}ngOnInit(){this.recipes=this.recipeService.getRecipes(),this.recipeSubscription=this.recipeService.recipesChanged.subscribe(i=>this.recipes=i)}ngOnDestroy(){this.recipeSubscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(a.j))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-list"]],decls:10,vars:3,consts:[[1,"row"],[1,"col-md-6"],[1,"recipes-title"],[1,"col-md-6","text-right"],[1,"btn","btn-success",3,"routerLink"],[1,"col-xs-12"],[3,"index","recipe",4,"ngFor","ngForOf"],[3,"index","recipe"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"My Recipes"),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4),e._uU(6,"New recipe"),e.qZA()()(),e.TgZ(7,"div",0)(8,"div",5),e.YNc(9,w,1,2,"app-recipe",6),e.qZA()()),2&i&&(e.xp6(5),e.Q6J("routerLink",e.DdM(2,A)),e.xp6(4),e.Q6J("ngForOf",n.recipes))},dependencies:[d.sg,s.rH,x],styles:[".recipes-title[_ngcontent-%COMP%]{margin:0 0 10px}"]}),t})();var b=c(1104);let l=(()=>{class t{constructor(i,n){this.dataStorageService=i,this.recipeService=n}resolve(i,n){const p=this.recipeService.getRecipes();if(0!==p.length)return p;this.dataStorageService.fetchRecipes()}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(b.Z),e.LFG(a.j))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var o=c(433);function q(t,r){1&t&&(e.TgZ(0,"span",17),e._uU(1,"Name required"),e.qZA())}function F(t,r){1&t&&(e.TgZ(0,"span",17),e._uU(1,"Image Required"),e.qZA())}function U(t,r){1&t&&(e.TgZ(0,"span",17),e._uU(1,"Description required"),e.qZA())}function y(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"div",20),e._UZ(3,"input",21),e.qZA(),e.TgZ(4,"div",22),e._UZ(5,"input",23),e.qZA(),e.TgZ(6,"div",24)(7,"button",25),e.NdJ("click",function(){const u=e.CHM(i).index,E=e.oxw();return e.KtG(E.removeControl(u))}),e._uU(8,"X"),e.qZA()()()()}if(2&t){const i=r.index;e.xp6(1),e.Q6J("formGroupName",i)}}function I(t,r){1&t&&(e.TgZ(0,"span",17),e._uU(1,"Preparation field required"),e.qZA())}let h=(()=>{class t{constructor(i,n,p){this.router=i,this.route=n,this.recipeService=p,this.editMode=!1}ngOnInit(){this.isEditMode()}isEditMode(){this.route.params.subscribe(i=>{this.id=+i.id,this.editMode=null!=i.id,this.initForm()})}initForm(){if(this.editMode&&(this.recipe=this.recipeService.getRecipe(this.id)),this.newRecipeForm=new o.cw({name:new o.NI(this.recipe?.name,o.kI.required),description:new o.NI(this.recipe?.description,o.kI.required),imagePath:new o.NI(this.recipe?.imagePath,o.kI.required),preparationDetails:new o.NI(this.recipe?.preparationDetails,o.kI.required),ingredients:new o.Oe([])}),this.recipe?.ingredients)for(let i=0;this.recipe.ingredients.length>i;i++){const n=new o.cw({name:new o.NI(this.recipe.ingredients[i]?.name,o.kI.required),amount:new o.NI(this.recipe.ingredients[i]?.amount,o.kI.required)});this.newRecipeForm.get("ingredients").push(n)}}onNewIngredient(){const i=new o.cw({name:new o.NI(null,o.kI.required),amount:new o.NI(null,o.kI.required)});this.newRecipeForm.get("ingredients").push(i)}removeControl(i){this.newRecipeForm.get("ingredients").removeAt(i)}getControls(){return this.newRecipeForm.get("ingredients").controls}onSubmit(){console.log(this.newRecipeForm),this.editMode?(this.recipeService.updateRecipe(this.newRecipeForm.value,this.id),this.router.navigate(["/recipes/"+this.id]).then()):(this.recipeService.addRecipe(this.newRecipeForm.value),this.router.navigate(["/recipes"]).then())}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(a.j))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-edit"]],decls:37,vars:9,consts:[[1,"row"],[1,"col-xs-12"],[3,"formGroup","ngSubmit"],[1,"form-group","col-xs-6"],["for","recipeName"],["type","text","id","recipeName","formControlName","name",1,"form-control"],["class","validation-message",4,"ngIf"],["for","imagePath"],["type","text","id","imagePath","placeholder","Optional","formControlName","imagePath",1,"form-control"],[1,"form-group","col-xs-12"],["for","description"],["id","description","rows","3","formControlName","description",1,"form-control"],["type","button",1,"btn","btn-primary","btn-sm","mr-5",3,"click"],["formArrayName","ingredients","class","row",4,"ngFor","ngForOf"],["for","preparationDetails"],["id","preparationDetails","rows","5","formControlName","preparationDetails",1,"form-control"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"validation-message"],["formArrayName","ingredients",1,"row"],[3,"formGroupName"],[1,"col-xs-6","form-group"],["formControlName","name","type","text","placeholder","Ingredient name",1,"form-control"],[1,"col-xs-4"],["formControlName","amount","type","text","placeholder","Amount",1,"form-control"],[1,"col-xs-2"],["type","button",1,"btn","btn-danger","mr-5",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.qZA(),e._UZ(4,"hr"),e.TgZ(5,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"div",3)(7,"label",4),e._uU(8,"Recipe Name"),e.qZA(),e._UZ(9,"input",5),e.YNc(10,q,2,0,"span",6),e.qZA(),e.TgZ(11,"div",3)(12,"label",7),e._uU(13,"Image Link"),e.qZA(),e._UZ(14,"input",8),e.YNc(15,F,2,0,"span",6),e.qZA(),e.TgZ(16,"div",9)(17,"label",10),e._uU(18,"Description"),e.qZA(),e._UZ(19,"textarea",11),e.YNc(20,U,2,0,"span",6),e.qZA(),e.TgZ(21,"div",9)(22,"label"),e._uU(23,"Ingredients"),e.qZA(),e._UZ(24,"br"),e.TgZ(25,"button",12),e.NdJ("click",function(){return n.onNewIngredient()}),e._uU(26,"Add ingredient"),e.qZA(),e._UZ(27,"hr"),e.YNc(28,y,9,1,"div",13),e.qZA(),e.TgZ(29,"div",9)(30,"label",14),e._uU(31,"Preparation Details"),e.qZA(),e._UZ(32,"textarea",15),e.YNc(33,I,2,0,"span",6),e.qZA(),e.TgZ(34,"div",9)(35,"button",16),e._uU(36),e.qZA()()()()()),2&i&&(e.xp6(3),e.Oqu(n.editMode?"Update recipe":"Add new recipe"),e.xp6(2),e.Q6J("formGroup",n.newRecipeForm),e.xp6(5),e.Q6J("ngIf",n.newRecipeForm.controls.name.invalid&&n.newRecipeForm.controls.name.touched),e.xp6(5),e.Q6J("ngIf",n.newRecipeForm.controls.imagePath.invalid&&n.newRecipeForm.controls.imagePath.touched),e.xp6(5),e.Q6J("ngIf",n.newRecipeForm.controls.description.invalid&&n.newRecipeForm.controls.description.touched),e.xp6(8),e.Q6J("ngForOf",n.getControls()),e.xp6(5),e.Q6J("ngIf",n.newRecipeForm.controls.preparationDetails.invalid&&n.newRecipeForm.controls.preparationDetails.touched),e.xp6(2),e.Q6J("disabled",n.newRecipeForm.invalid),e.xp6(1),e.Oqu(n.editMode?"Update":"Add"))},dependencies:[d.sg,d.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.x0,o.CE],styles:[".mt-5[_ngcontent-%COMP%]{margin-top:10px}.mr-5[_ngcontent-%COMP%]{margin-right:5px}.validation-message[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:solid 1px red}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border:solid 1px lawngreen}textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:solid 1px red}textarea.ng-valid.ng-touched[_ngcontent-%COMP%]{border:solid 1px lawngreen}"]}),t})();var M=c(58),O=c(1300);function N(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"p",16),e._uU(2),e.qZA(),e.TgZ(3,"p",16),e._uU(4),e.qZA(),e.BQk()),2&t){const i=r.$implicit;e.xp6(2),e.hij(" ",i.name,""),e.xp6(2),e.Oqu(i.amount)}}const S=function(){return["/recipes"]},P=function(){return["edit"]},k=[{path:"",component:f,resolve:[v],canActivate:[R],children:[{path:"",component:T,resolve:[l]},{path:"new",component:h},{path:":id",component:(()=>{class t{constructor(i,n,p,u){this.shoppingListRecipe=i,this.route=n,this.router=p,this.recipeService=u}ngOnInit(){this.route.params.subscribe(i=>{this.id=+i.id,this.recipe=this.recipeService.getRecipe(this.id)})}addIngredients(i){this.shoppingListRecipe.insertNewIngredientArray(i)}deleteRecipe(){!0===confirm("Are you sure you want to remove this recipe?")&&(this.recipeService.deleteRecipe(this.id),this.router.navigate(["/recipes"]).then())}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(M._),e.Y36(s.gz),e.Y36(s.F0),e.Y36(a.j))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-details"]],decls:42,vars:9,consts:[[1,"row"],[1,"col-xs-12"],["alt","",1,"image-details",3,"src"],[1,"btn","btn-default","btn-back",3,"routerLink"],[1,"col-xs-8","recipe-detail-title"],[1,"col-xs-4","text-right"],["app-dropdown","",1,"btn-group"],[1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[3,"click"],[3,"routerLink"],[1,"bg-danger",3,"click"],[1,"no-margin-bottom"],[1,"col-xs-12","row-no-gutters"],[4,"ngFor","ngForOf"],[1,"col-xs-6"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA()(),e.TgZ(3,"a",3),e._uU(4,"< Go back"),e.qZA(),e.TgZ(5,"div",0)(6,"div",4)(7,"h2"),e._uU(8),e.qZA()(),e.TgZ(9,"div",5)(10,"div",6)(11,"button",7),e._uU(12," Manage recipe "),e._UZ(13,"span",8),e.qZA(),e.TgZ(14,"ul",9)(15,"li")(16,"a",10),e.NdJ("click",function(){return n.addIngredients(n.recipe.ingredients)}),e._uU(17,"Add to Shopping list"),e.qZA()(),e.TgZ(18,"li")(19,"a",11),e._uU(20,"Edit recipe"),e.qZA()(),e.TgZ(21,"li")(22,"a",12),e.NdJ("click",function(){return n.deleteRecipe()}),e._uU(23,"Delete recipe"),e.qZA()()()()()(),e._UZ(24,"hr",13),e.TgZ(25,"div",0)(26,"div",1)(27,"h2"),e._uU(28,"Description"),e.qZA(),e.TgZ(29,"div"),e._uU(30),e.qZA()()(),e.TgZ(31,"div",0)(32,"div",1)(33,"h2"),e._uU(34,"Preparation details"),e.qZA(),e.TgZ(35,"div"),e._uU(36),e.qZA()()(),e.TgZ(37,"div",0)(38,"div",14)(39,"h2"),e._uU(40,"Ingredients"),e.qZA(),e.YNc(41,N,5,2,"ng-container",15),e.qZA()()),2&i&&(e.xp6(2),e.s9C("src",n.recipe.imagePath,e.LSH),e.xp6(1),e.Q6J("routerLink",e.DdM(7,S)),e.xp6(5),e.Oqu(n.recipe.name),e.xp6(11),e.Q6J("routerLink",e.DdM(8,P)),e.xp6(11),e.Oqu(n.recipe.description),e.xp6(6),e.Oqu(n.recipe.preparationDetails),e.xp6(5),e.Q6J("ngForOf",n.recipe.ingredients))},dependencies:[d.sg,O.w,s.yS],styles:["a[_ngcontent-%COMP%]{cursor:pointer}.recipe-detail-title[_ngcontent-%COMP%]{margin:-20px 0}.no-margin-bottom[_ngcontent-%COMP%]{margin-bottom:0}.image-details[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:300px;padding-bottom:5px}.btn-back[_ngcontent-%COMP%]{position:absolute;top:2%;left:25px;opacity:80%}"]}),t})(),resolve:[l]},{path:":id/edit",component:h,resolve:[l]}]}];let L=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.Bz.forChild(k),s.Bz]}),t})();var D=c(4466),J=c(294);let Y=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[D.m,J.I,L]}),t})()}}]);